# D-008: æ¨è–¦é é¢è¨­è¨ˆè¦æ ¼

> **Recommendation Page å®Œæ•´è¨­è¨ˆè¦ç¯„ï¼ˆæ ¸å¿ƒé é¢ï¼‰**

**ä»»å‹™ç‹€æ…‹**: âœ… è¦æ ¼å·²å»ºç«‹
**å»ºç«‹æ—¥æœŸ**: 2025-01-26

---

## ğŸ“± è¨­è¨ˆæ¦‚è¦½

### é é¢ç›®æ¨™
1. **æ ¸å¿ƒé«”é©—**: ä¸€æ¬¡ä¸€é“èœçš„å¡ç‰‡ç¿»è½‰æ¨è–¦
2. **é™ä½æ±ºç­–ç–²å‹**: åªæä¾›ã€Œè¦ã€æˆ–ã€Œæ›ã€å…©å€‹é¸é …
3. **å³æ™‚åƒ¹æ ¼å›é¥‹**: æ›èœæ™‚ç«‹å³é¡¯ç¤ºåƒ¹æ ¼è®ŠåŒ–
4. **é€²åº¦å¯è¦–åŒ–**: æ¸…æ¥šé¡¯ç¤ºå·²æ±ºå®šå¹¾é“èœ
5. **å»ºç«‹æœŸå¾…æ„Ÿ**: å‹•ç•«ç‡Ÿé€ é–‹ç›²ç›’çš„èˆˆå¥®æ„Ÿ

### é é¢çµæ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [MenuSummary Card]                 â”‚  â† å›ºå®šé ‚éƒ¨
â”‚  æœ¬æ¬¡èœå–®çµ„æˆ | å·²æ±ºå®š 2/6 é“        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                     â”‚
â”‚         [DishCard]                  â”‚  â† ä¸»è¦å…§å®¹å€
â”‚      (ç•¶å‰æ¨è–¦çš„èœå“)                 â”‚
â”‚                                     â”‚
â”‚  [âœ… æˆ‘è¦é»é€™é“] [ğŸ”„ æ›ä¸€é“]         â”‚
â”‚                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [PriceIndicator]                   â”‚  â† æµ®å‹•æç¤º
â”‚  +NT$ 40 âš ï¸                         â”‚  (åƒ¹æ ¼è®ŠåŒ–æ™‚)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ MenuSummary Section (èœå–®æ‘˜è¦)

### Mobile ç‰ˆæœ¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æœ¬æ¬¡èœå–®çµ„æˆ                        â”‚  â† H2
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ¥— å†·èœ Ã—1 â”‚  â”‚ ğŸ– ç†±èœ Ã—2 â”‚    â”‚  â† Category Grid
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸš ä¸»é£Ÿ Ã—1 â”‚  â”‚ ğŸ¥Ÿ é»å¿ƒ Ã—2 â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å…± 6 é“                            â”‚
â”‚  ç¸½åƒ¹ NT$ 1,200                     â”‚  â† Display/3XL
â”‚  äººå‡ NT$ 400 (3äºº)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å·²æ±ºå®š 2/6 é“            33%       â”‚
â”‚  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘              â”‚  â† Progress Bar
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è©³ç´°è¦æ ¼

**Container:**
- [ä½¿ç”¨ MenuSummary component]
- Background: surface (#FFFFFF)
- Padding: 24px
- Border-radius: 24px (top corners only, åº•éƒ¨ç›´è§’)
- Shadow: shadow-card
- Margin-bottom: 24px
- Position: sticky, top: 0, z-index: 10 (optional)

**Title:**
- Font: Display/2XL (31px)
- Color: charcoal
- Margin-bottom: 16px

**Category Grid:**
- Display: grid
- Grid-template-columns: repeat(2, 1fr)
- Gap: 12px
- Margin-bottom: 16px

**Category Item:**
- Background: cream-100
- Padding: 12px 16px
- Border-radius: 8px
- Display: flex, align-items: center, gap: 8px

**Category Emoji:**
- Font-size: 32px

**Category Label:**
- Font: Body/SM Medium (13px)
- Color: charcoal
- Flex: 1

**Category Count:**
- Font: Body/LG Bold (20px)
- Color: terracotta
- Margin-left: auto

**Divider:**
- Height: 1px
- Background: charcoal/10
- Margin: 16px 0

**Summary Row:**
- Display: flex
- Justify-content: space-between
- Align-items: baseline
- Margin-bottom: 8px

**Total Dishes:**
- Font: Body/Base (16px)
- Color: charcoal/70

**Total Price:**
- Font: Display/3XL (39px)
- Color: charcoal
- Font-weight: Semibold

**Per Person:**
- Font: Body/LG (20px)
- Color: sage-700
- Margin-top: 4px

**Progress Section:**
- Margin-top: 16px

**Progress Text Row:**
- Display: flex
- Justify-content: space-between
- Font: Body/SM (13px)
- Color: charcoal/80
- Margin-bottom: 8px

**Progress Percentage:**
- Font: Body/SM Medium (13px)
- Color: terracotta

**Progress Bar:**
- [ä½¿ç”¨ Progress Bar component]
- Height: 12px
- Background: charcoal/10
- Fill: gradient-accent
- Border-radius: full

---

## ğŸƒ DishCard Section (èœå“å¡ç‰‡)

### Mobile ç‰ˆæœ¬

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚   [Photo Placeholder]       â”‚   â”‚  â† 192px height
â”‚  â”‚   (æ·¡è‰²èƒŒæ™¯ + emoji)         â”‚   â”‚
â”‚  â”‚                             â”‚   â”‚
â”‚  â”‚   ğŸ¥— å†·èœ                   â”‚   â”‚  â† Badge (å·¦ä¸Šè§’)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                     â”‚
â”‚  æ¶¼æ‹Œé»ƒç“œ                            â”‚  â† H3
â”‚  NT$ 80                             â”‚  â† Price
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚ âœï¸ "æ¸…çˆ½é–‹èƒƒï¼Œæ­é…ç†±èœæ›´... â”‚     â”‚  â† Reason Box
â”‚  â”‚    45 å‰‡è©•è«–æ¨è–¦"           â”‚     â”‚  (Handwriting)
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚âœ… æˆ‘è¦é»é€™é“  â”‚ â”‚ğŸ”„ æ›ä¸€é“  â”‚    â”‚  â† Action Buttons
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è©³ç´°è¦æ ¼

**Container:**
- [ä½¿ç”¨ SwappingCard + DishCard components]
- Background: surface
- Border-radius: 24px
- Shadow: shadow-card
- Padding: 0 (photo full bleed), then 24px
- Margin: 0 24px 120px 24px (bottom margin ç‚ºæŒ‰éˆ•ç©ºé–“)
- Max-width: 480px (desktop)
- Margin: 0 auto

**Photo Placeholder:**
- Height: 192px (mobile) / 256px (desktop)
- Background: linear-gradient(135deg, cream-50, caramel-50)
- Display: flex, align-items: center, justify-content: center
- Border-radius: 24px 24px 0 0

**Photo Emoji:**
- Font-size: 96px (mobile) / 120px (desktop)
- Opacity: 30%
- èœç³»å°æ‡‰ emoji:
  - å†·èœ: ğŸ¥—
  - ç†±èœ: ğŸ–
  - æ¹¯å“: ğŸ²
  - ä¸»é£Ÿ: ğŸš
  - é»å¿ƒ: ğŸ¥Ÿ
  - ç”œé»: ğŸ°

**Category Badge:**
- [ä½¿ç”¨ Badge component]
- Position: absolute, top: 16px, left: 16px
- Background: sage/10
- Color: sage-700
- Padding: 6px 12px
- Font: Body/SM Medium (13px)

**Content Area:**
- Padding: 24px

**Dish Name (H3):**
- Font: Body/XL Bold (25px)
- Color: charcoal
- Margin-bottom: 8px

**Price:**
- Font: Display/2XL (31px)
- Color: terracotta
- Font-weight: Semibold
- Margin-bottom: 16px

**Reason Box:**
- Background: linear-gradient(to right, cream-100 0%, transparent 100%) @ 50% opacity
- Padding: 16px
- Border-left: 4px solid caramel
- Border-radius: 0 8px 8px 0
- Transform: rotate(-1deg) (æ•´å€‹ box å¾®å¾®å‚¾æ–œ)
- Margin-bottom: 24px

**Reason Text:**
- Font: Handwriting/XL (25px)
- Color: caramel-700
- Line-height: 1.75
- Font-family: Caveat

**Review Count (optional):**
- Font: Body/SM (13px)
- Color: charcoal/60
- Margin-top: 8px

**Action Buttons Container:**
- Display: flex
- Gap: 12px
- Padding: 0 24px 24px 24px

**Confirm Button:**
- [ä½¿ç”¨ Button component, variant: primary, size: md]
- Flex: 1
- Icon: âœ… (left)
- Text: "æˆ‘è¦é»é€™é“"

**Swap Button:**
- [ä½¿ç”¨ Button component, variant: outline, size: md]
- Flex: 1
- Icon: ğŸ”„ (left)
- Text: "æ›ä¸€é“"

---

### DishCard States (ç‹€æ…‹)

#### Default State (é è¨­)
- ä¸Šè¿°æ‰€æœ‰æ¨£å¼
- å…©å€‹æŒ‰éˆ•éƒ½å¯è¦‹
- å¡ç‰‡ opacity: 1

#### Confirmed State (å·²ç¢ºèª)
- Card opacity: 0.75
- Border: 3px solid success (#6B9D7F)
- CheckCircle icon: å³ä¸Šè§’, 32px, success color
- Action Buttons: éš±è—
- ä¸å¯å†äº’å‹•ï¼ˆpointer-events: noneï¼‰

#### Loading State (è¼‰å…¥ä¸­)
- Skeleton screen
- Photo area: shimmer animation
- Text areas: pulse animation
- Buttons: disabled

---

## ğŸ’° PriceIndicator (åƒ¹æ ¼è®ŠåŒ–æç¤º)

### é¡¯ç¤ºæ™‚æ©Ÿ

**è§¸ç™¼æ¢ä»¶:**
- é»æ“Šã€Œæ›ä¸€é“ã€æ™‚
- æ–°èœå“åƒ¹æ ¼ â‰  èˆŠèœå“åƒ¹æ ¼

**é¡¯ç¤ºå…§å®¹:**
- åƒ¹æ ¼ä¸Šå‡: `+NT$ 40 âš ï¸` (warning color)
- åƒ¹æ ¼ä¸‹é™: `-NT$ 30 âœ“` (success color)

### è©³ç´°è¦æ ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  +NT$ 40 âš ï¸  â”‚  â† æµ®å‹• badge
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Container:**
- [ä½¿ç”¨ PriceIndicator component]
- Position: fixed
- Top: 96px (MenuSummary ä¸‹æ–¹)
- Right: 16px
- Z-index: 50

**Badge:**
- Background: warning (#E89C5C) ä¸Šå‡ / success (#6B9D7F) ä¸‹é™
- Color: white
- Padding: 12px 20px
- Border-radius: 9999px (full)
- Shadow: shadow-floating
- Font: Body/LG Bold (20px)

**Icon:**
- âš ï¸ ä¸Šå‡ä¸”è¶…é $50
- âœ“ ä¸‹é™

**Animation:**
```javascript
// é€²å ´
{
  initial: { x: 400, opacity: 0, scale: 0.8 },
  animate: { x: 0, opacity: 1, scale: 1 },
  transition: { type: 'spring', stiffness: 200, damping: 25 }
}

// Pulse (é‡è¤‡ 2 æ¬¡)
{
  animate: { scale: [1, 1.15, 1, 1.15, 1] },
  transition: { duration: 0.8 }
}

// é›¢å ´ (2 ç§’å¾Œ)
{
  animate: { opacity: 0, y: -20 },
  transition: { duration: 0.3, delay: 2 }
}
```

---

## ğŸ¬ å‹•ç•«è¦ç¯„

### Card Swap Animation (æ ¸å¿ƒå‹•ç•«)

#### Swap Out (èˆŠå¡ç‰‡)

```javascript
{
  initial: { x: 0, rotate: 0, opacity: 1, scale: 1 },
  exit: {
    x: '-100vw',
    rotate: -15,
    opacity: 0,
    scale: 0.8
  },
  transition: {
    duration: 0.4,
    ease: [0.4, 0, 0.2, 1]
  }
}
```

#### Swap In (æ–°å¡ç‰‡)

```javascript
{
  initial: { x: '100vw', rotate: 15, opacity: 0, scale: 0.8 },
  animate: {
    x: 0,
    rotate: 0,
    opacity: 1,
    scale: 1
  },
  transition: {
    type: 'spring',
    stiffness: 100,
    damping: 20,
    mass: 1
  }
}
```

#### Confirm Animation (ç¢ºèª)

```javascript
// Stage 1: è¼•å¾®æ”¾å¤§
{
  animate: { scale: 1.02 },
  transition: { duration: 0.2 }
}

// Stage 2: é™ä½é€æ˜åº¦ + åŠ é‚Šæ¡†
{
  animate: {
    opacity: 0.75,
    border: '3px solid #6B9D7F'
  },
  transition: { duration: 0.3 }
}

// Stage 3: CheckCircle icon å½ˆå‡º
{
  initial: { scale: 0, rotate: -180 },
  animate: { scale: 1, rotate: 0 },
  transition: {
    type: 'spring',
    stiffness: 200,
    damping: 15,
    delay: 0.2
  }
}
```

### MenuSummary æ›´æ–°å‹•ç•«

**Price æ•¸å­—è®ŠåŒ–:**
```javascript
// ä½¿ç”¨ react-countup æˆ– Framer Motion
{
  animate: { value: newPrice },
  transition: {
    duration: 0.8,
    ease: 'easeOut'
  }
}
```

**Progress Bar å¢é•·:**
```javascript
{
  animate: { width: `${newPercentage}%` },
  transition: {
    duration: 0.6,
    ease: 'easeOut',
    delay: 0.3  // åœ¨å¡ç‰‡ç¢ºèªå¾Œå†å¢é•·
  }
}
```

**Category Count æ›´æ–°:**
```javascript
{
  animate: {
    scale: [1, 1.2, 1],
    color: [charcoal, terracotta, charcoal]
  },
  transition: { duration: 0.4 }
}
```

---

## ğŸ”„ äº’å‹•æµç¨‹

### ç”¨æˆ¶é»æ“Šã€Œæˆ‘è¦é»é€™é“ã€

```
1. å¡ç‰‡åŸ·è¡Œ Confirm Animation (600ms)
   - æ”¾å¤§ â†’ é™ä½é€æ˜åº¦ â†’ åŠ é‚Šæ¡† â†’ CheckCircle å½ˆå‡º

2. MenuSummary åŒæ­¥æ›´æ–° (800ms)
   - Progress Bar å¢é•·
   - å·²æ±ºå®šæ•¸å­— +1
   - ç¸½åƒ¹æ•¸å­—æ»¾å‹•
   - å°æ‡‰é¡åˆ¥ count +1 ä¸¦é–ƒçˆ

3. å»¶é² 800ms å¾Œï¼Œè¼‰å…¥ä¸‹ä¸€å¼µå¡ç‰‡
   - èˆŠå¡ç‰‡æ·¡å‡ºï¼ˆä¸ç¿»è½‰ï¼Œå› ç‚ºå·²ç¢ºèªï¼‰
   - æ–°å¡ç‰‡å¾å³å´æ»‘å…¥

4. å¦‚æœå·²å®Œæˆæ‰€æœ‰èœå“
   - è§¸ç™¼æ…¶ç¥å‹•ç•«ï¼ˆconfettiï¼‰
   - é¡¯ç¤ºã€Œå®Œæˆèœå–®ã€æŒ‰éˆ•
   - è‡ªå‹•è·³è½‰è‡³ Menu Page (2 ç§’å¾Œ)
```

### ç”¨æˆ¶é»æ“Šã€Œæ›ä¸€é“ã€

```
1. èˆŠå¡ç‰‡åŸ·è¡Œ Swap Out Animation (400ms)
   - å‘å·¦é£›å‡º + æ—‹è½‰ -15deg + ç¸®å°

2. åŒæ™‚ï¼ŒAPI è«‹æ±‚æ–°èœå“
   - é¡¯ç¤º Loading Skeleton (å¦‚æœ API æœªè¿”å›)

3. æ–°å¡ç‰‡åŸ·è¡Œ Swap In Animation (600ms)
   - å¾å³å´é£›å…¥ + æ—‹è½‰ 15deg â†’ 0deg + å½ˆè·³

4. å¦‚æœåƒ¹æ ¼æœ‰è®ŠåŒ–
   - PriceIndicator å¾å³å´é£›å…¥
   - Pulse å‹•ç•« Ã— 2
   - MenuSummary ç¸½åƒ¹åŒæ­¥æ›´æ–°
   - 2 ç§’å¾Œè‡ªå‹•æ¶ˆå¤±
```

### é‚Šç•Œæƒ…æ³è™•ç†

**é€£çºŒå¿«é€Ÿé»æ“Šã€Œæ›ä¸€é“ã€:**
- ç¦ç”¨æŒ‰éˆ•ç›´åˆ°å‹•ç•«å®Œæˆï¼ˆ400msï¼‰
- é˜²æ­¢é‡è¤‡è«‹æ±‚ API

**API è«‹æ±‚å¤±æ•—:**
- é¡¯ç¤º Toast: "å“å‘€ï¼Œè¼‰å…¥å¤±æ•—äº†ï¼Œè«‹å†è©¦ä¸€æ¬¡"
- ä¿ç•™èˆŠå¡ç‰‡ï¼Œå…è¨±é‡è©¦

**èœæ± è€—ç›¡ï¼ˆæ›äº† 20 æ¬¡é‚„ä¸æ»¿æ„ï¼‰:**
- æç¤º: "æˆ‘å€‘å·²ç¶“ç‚ºæ‚¨æŒ‘é¸äº†æœ€åˆé©çš„èœå“å›‰ï¼"
- å»ºè­°ç¢ºèªç•¶å‰èœå“æˆ–èª¿æ•´åå¥½è¨­å®š

---

## ğŸ“Š è³‡æ–™æµ

### API Request (æ›èœ)

```typescript
POST /api/recommendations/swap
{
  "sessionId": "abc123",
  "currentDishId": "dish_456",
  "categoryIndex": 0,  // ç¬¬å¹¾é“èœï¼ˆ0-basedï¼‰
  "context": {
    "alreadySelected": ["dish_123", "dish_789"],
    "totalBudget": 1200,
    "remainingBudget": 800
  }
}

Response:
{
  "dish": {
    "id": "dish_999",
    "name": "æ¶¼æ‹Œé»ƒç“œ",
    "category": "å†·èœ",
    "price": 80,
    "reason": "æ¸…çˆ½é–‹èƒƒï¼Œæ­é…ç†±èœæ›´å‡è¡¡ï¼Œ45 å‰‡è©•è«–æ¨è–¦",
    "emoji": "ğŸ¥—",
    "reviewCount": 45
  },
  "priceDiff": -20,  // ç›¸è¼ƒæ–¼èˆŠèœå“
  "newTotal": 1180
}
```

### å‰ç«¯ç‹€æ…‹ç®¡ç†

```typescript
interface RecommendationState {
  menu: {
    totalDishes: number
    categories: {
      name: string
      emoji: string
      count: number
    }[]
    totalPrice: number
    perPerson: number
    people: number
  }

  currentDish: Dish | null
  confirmedDishes: Dish[]
  currentIndex: number  // ç›®å‰æ¨è–¦ç¬¬å¹¾é“ï¼ˆ0-basedï¼‰

  isSwapping: boolean
  isConfirming: boolean
  showPriceIndicator: boolean
  priceDiff: number | null
}
```

---

## ğŸ‰ å®Œæˆç‹€æ…‹

### æ‰€æœ‰èœå“ç¢ºèªå®Œæˆæ™‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                     â”‚
â”‚         ğŸ‰                          â”‚
â”‚                                     â”‚
â”‚      èœå–®å®Œæˆï¼                      â”‚  â† H2
â”‚      å…± 6 é“èœ NT$ 1,200            â”‚
â”‚                                     â”‚
â”‚  [å·²é¸èœå“ç¸®åœ–åˆ—è¡¨]                  â”‚
â”‚  ğŸ¥— ğŸ– ğŸ– ğŸš ğŸ¥Ÿ ğŸ¥Ÿ                  â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  ğŸ“‹ æŸ¥çœ‹å®Œæ•´èœå–®          â”‚      â”‚  â† Primary CTA
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  ğŸ”„ é‡æ–°æ¨è–¦              â”‚      â”‚  â† Secondary CTA
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è©³ç´°è¦æ ¼

**Confetti Animation:**
- [ä½¿ç”¨ canvas-confetti]
- è§¸ç™¼æ™‚æ©Ÿ: Progress é”åˆ° 100% æ™‚
- å»¶é² 500ms è§¸ç™¼
- 150 é¡†ç²’å­ï¼Œæš–è‰²ç³»
- æŒçºŒ 3 ç§’

**Success Screen:**
- Background: cream-100
- Padding: 48px 24px
- Text-align: center

**Celebration Emoji:**
- Font-size: 120px
- Margin-bottom: 24px
- Animation: bounce + rotate

**Title:**
- Font: Display/3XL (39px)
- Color: charcoal
- Margin-bottom: 8px

**Summary:**
- Font: Body/LG (20px)
- Color: charcoal/70
- Margin-bottom: 32px

**Dish Icons Row:**
- Display: flex, gap: 8px, justify-content: center
- Margin-bottom: 40px

**Dish Icon:**
- Font-size: 48px
- Background: cream-200
- Padding: 12px
- Border-radius: 50%
- Box-shadow: shadow-sm

**Primary CTA:**
- [Button component, variant: primary, size: lg]
- Width: 100% (max-width: 320px)
- Margin-bottom: 16px

**Secondary CTA:**
- [Button component, variant: ghost, size: md]
- Width: auto

**Auto-redirect:**
- 2 ç§’å¾Œè‡ªå‹•è·³è½‰è‡³ Menu Page
- é¡¯ç¤ºå€’æ•¸è¨ˆæ™‚: "2 ç§’å¾Œè‡ªå‹•è·³è½‰..."

---

## ğŸ“± éŸ¿æ‡‰å¼è¨­è¨ˆ

### Mobile (375px - 767px)
- MenuSummary: Full-width, sticky top (optional)
- DishCard: Max-width 100%, padding 24px
- Buttons: Full-width stack
- PriceIndicator: Right 16px

### Desktop (1280px+)
- MenuSummary: Max-width 480px, ä¸ stickyï¼ˆæ”¹ç‚ºå·¦å´å›ºå®šæ¬„ï¼‰
- DishCard: Max-width 480px, å±…ä¸­
- Buttons: ä¸¦æ’ï¼Œå„ä½” 50%
- PriceIndicator: Right 32px

**Desktop ä½ˆå±€ (Optional Advanced):**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚             â”‚    â”‚              â”‚    â”‚
â”‚  â”‚ MenuSummary â”‚    â”‚   DishCard   â”‚    â”‚
â”‚  â”‚ (å›ºå®šå·¦å´)   â”‚    â”‚   (å±…ä¸­)     â”‚    â”‚
â”‚  â”‚             â”‚    â”‚              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚   â† å·¦æ¬„ 30%         å³æ¬„ 70% â†’          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## â™¿ ç„¡éšœç¤™è€ƒé‡

### éµç›¤æ“ä½œ

**å¿«æ·éµ:**
- `Enter` æˆ– `Space`: ç¢ºèªç•¶å‰èœå“
- `â†’` (å³ç®­é ­): æ›ä¸€é“èœ
- `Esc`: é€€å‡ºæ¨è–¦æµç¨‹ï¼ˆè¿”å›è¼¸å…¥é ï¼‰

### ARIA æ¨™ç±¤

```html
<main aria-label="èœå“æ¨è–¦">
  <section aria-label="èœå–®æ‘˜è¦" aria-live="polite">
    <!-- MenuSummary -->
  </section>

  <article aria-label="ç•¶å‰æ¨è–¦èœå“" role="article">
    <h3>{dishName}</h3>
    <p aria-label="åƒ¹æ ¼">NT$ {price}</p>
    <p aria-label="æ¨è–¦ç†ç”±">{reason}</p>
  </article>

  <nav aria-label="èœå“æ“ä½œ">
    <button aria-label="ç¢ºèªæ­¤èœå“">æˆ‘è¦é»é€™é“</button>
    <button aria-label="æ›ä¸€é“èœ">æ›ä¸€é“</button>
  </nav>
</main>
```

### å‹•ç•«æ¸›å¼±

```javascript
const shouldReduceMotion = useReducedMotion()

// å¦‚æœç”¨æˆ¶åå¥½æ¸›å°‘å‹•ç•«
if (shouldReduceMotion) {
  // å¡ç‰‡ç¿»è½‰æ”¹ç‚ºæ·¡å…¥æ·¡å‡º
  swapAnimation = { opacity: [0, 1], duration: 0.15 }
  // å–æ¶ˆ confetti
  skipConfetti = true
}
```

---

## ğŸ“ D-008 ä»»å‹™å®Œæˆå ±å‘Š

### å®Œæˆé …ç›®
âœ… è¨­è¨ˆæ ¸å¿ƒæ¨è–¦é é¢çµæ§‹
âœ… MenuSummary æ‘˜è¦å¡ç‰‡è¨­è¨ˆï¼ˆé¡åˆ¥çµ±è¨ˆ + é€²åº¦ï¼‰
âœ… DishCard èœå“å¡ç‰‡è¨­è¨ˆï¼ˆ3 ç¨®ç‹€æ…‹ï¼‰
âœ… PriceIndicator åƒ¹æ ¼è®ŠåŒ–æç¤º
âœ… å®Œæ•´çš„å¡ç‰‡ç¿»è½‰å‹•ç•«è¦ç¯„
âœ… äº’å‹•æµç¨‹è¨­è¨ˆï¼ˆç¢ºèª/æ›èœï¼‰
âœ… å®Œæˆç‹€æ…‹è¨­è¨ˆï¼ˆæ…¶ç¥å‹•ç•«ï¼‰
âœ… è³‡æ–™æµèˆ‡ç‹€æ…‹ç®¡ç†
âœ… éŸ¿æ‡‰å¼èˆ‡ç„¡éšœç¤™è¦ç¯„

### äº¤ä»˜ç‰©
- `D-008-RECOMMENDATION-PAGE-DESIGN.md` - å®Œæ•´æ¨è–¦é è¨­è¨ˆè¦æ ¼

### è¨­è¨ˆé‡é»

#### æ ¸å¿ƒé«”é©—è¨­è¨ˆ:
1. **ä¸€æ¬¡ä¸€é“èœ**: é™ä½æ±ºç­–ç–²å‹ï¼Œèšç„¦ç•¶å‰é¸æ“‡
2. **å¡ç‰‡ç¿»è½‰**: ç‡Ÿé€ é–‹ç›²ç›’çš„æœŸå¾…æ„Ÿèˆ‡é©šå–œ
3. **å³æ™‚å›é¥‹**: åƒ¹æ ¼è®ŠåŒ–ã€é€²åº¦æ›´æ–°éƒ½å³æ™‚å¯è¦‹
4. **æ…¶ç¥æ™‚åˆ»**: å®Œæˆæ™‚çš„ confetti å‹•ç•«å¼·åŒ–æˆå°±æ„Ÿ

#### å‹•ç•«ç­–ç•¥:
- **Swap Out + Swap In**: 400ms + 600msï¼Œæµæš¢çš„å¡ç‰‡äº¤æ›¿
- **Confirm Animation**: å¤šéšæ®µå‹•ç•«ï¼Œæ¸…æ¥šæ¨™ç¤ºå·²ç¢ºèª
- **Price Indicator**: Spring å‹•ç•« + Pulseï¼Œå¸å¼•æ³¨æ„åŠ›
- **Progress Update**: Stagger å‹•ç•«ï¼Œè¦–è¦ºä¸Šæ›´è±å¯Œ

#### è³‡è¨Šæ¶æ§‹:
- **MenuSummary**: æä¾›å…¨å±€è¦–è§’ï¼ˆå…±å¹¾é“ã€ç¸½åƒ¹ã€é€²åº¦ï¼‰
- **DishCard**: èšç„¦å–®ä¸€èœå“ï¼ˆåç¨±ã€åƒ¹æ ¼ã€æ¨è–¦ç†ç”±ï¼‰
- **PriceIndicator**: å³æ™‚å›é¥‹ï¼ˆåƒ¹æ ¼è®ŠåŒ–æé†’ï¼‰

### å¯¦éš›åŸ·è¡Œäº‹é …ï¼ˆè¨­è¨ˆå¸«éœ€å®Œæˆï¼‰

**ä»Šæ—¥å®Œæˆ** (6 å°æ™‚):
1. åœ¨ Figma å»ºç«‹ Recommendation Page Frame
2. è¨­è¨ˆ MenuSummary å¡ç‰‡ï¼ˆåŒ…å« Grid + Progressï¼‰
3. è¨­è¨ˆ DishCardï¼ˆ3 ç¨®ç‹€æ…‹: Default, Confirmed, Loadingï¼‰
4. è¨­è¨ˆ PriceIndicator æµ®å‹•æç¤º
5. è¨­è¨ˆå®Œæˆç‹€æ…‹ç•«é¢ï¼ˆSuccess Screenï¼‰

**æ˜æ—¥å®Œæˆ** (4 å°æ™‚):
6. å»ºç«‹å¡ç‰‡ç¿»è½‰å‹•ç•«åŸå‹ï¼ˆFigma Smart Animateï¼‰
7. å»ºç«‹ Desktop ç‰ˆæœ¬ï¼ˆå·¦å³åˆ†æ¬„ä½ˆå±€ï¼‰
8. æ¸¬è©¦æ‰€æœ‰äº’å‹•æµç¨‹
9. èª¿æ•´ç´°ç¯€ï¼ˆé–“è·ã€é¡è‰²ã€é™°å½±ï¼‰

### æŠ€è¡“è¦é»

- ä½¿ç”¨ Framer Motion çš„ AnimatePresence è™•ç†å¡ç‰‡åˆ‡æ›
- ä½¿ç”¨ react-countup æˆ– Framer Motion è™•ç†æ•¸å­—å‹•ç•«
- ä½¿ç”¨ canvas-confetti è™•ç†æ…¶ç¥å‹•ç•«
- ç‹€æ…‹ç®¡ç†: React Context + useReducer
- API è«‹æ±‚: SWR æˆ– React Query (è™•ç†å¿«å–èˆ‡é‡è©¦)

### æ•ˆèƒ½è€ƒé‡

- å¡ç‰‡åœ–ç‰‡ä½¿ç”¨ lazy loading
- å‹•ç•«åªä½¿ç”¨ transform å’Œ opacity (GPU åŠ é€Ÿ)
- é™åˆ¶æ›èœæ¬¡æ•¸ï¼ˆé˜²æ­¢æƒ¡æ„è«‹æ±‚ï¼‰
- å‰ç«¯å¿«å–å€™é¸èœå“ï¼ˆæ¸›å°‘ API è«‹æ±‚ï¼‰

### ä¸‹ä¸€æ­¥
D-009: èœå–®é é¢è¨­è¨ˆï¼ˆMenu Pageï¼‰

---

**ä»»å‹™ç‹€æ…‹**: âœ… è¦æ ¼å®Œæˆ
**å»ºç«‹æ™‚é–“**: 2025-01-26
**é ä¼°æ™‚é–“**: 6 å°æ™‚ï¼ˆè¦æ ¼å»ºç«‹ï¼‰ + 10 å°æ™‚ï¼ˆå¯¦éš›è¨­è¨ˆï¼‰
