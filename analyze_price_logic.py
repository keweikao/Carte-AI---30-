#!/usr/bin/env python3
"""
åˆ†ææ¨è–¦é é¢çš„åƒ¹æ ¼é‚è¼¯æ­£ç¢ºæ€§
"""

print("=" * 80)
print("ğŸ’° åƒ¹æ ¼é‚è¼¯åˆ†æå ±å‘Š")
print("=" * 80)
print()

# æ¨¡æ“¬ç¾æœ‰é‚è¼¯
print("## ğŸ“‹ ç¾æœ‰é‚è¼¯åˆ†æ (recommendation/page.tsx)")
print()

print("### 1. åƒ¹æ ¼è¨ˆç®—æ–¹å¼ (line 239-247)")
print("```typescript")
print("const calculateTotal = () => {")
print("    return currentItems.reduce((sum, item) => {")
print("        // åªè¨ˆç®—è¢«è©•ç‚ºã€Œlikeã€çš„èœå“")
print("        if (itemRatings.get(item.name) === 'like') {")
print("            return sum + (item.price || 0);")
print("        }")
print("        return sum;")
print("    }, 0);")
print("};")
print("```")
print()

print("### 2. é¡¯ç¤ºä½ç½® (line 360-361, 409-413)")
print("```typescript")
print("const total = calculateTotal();")
print("const perPerson = Math.round(total / people);")
print()
print("// é¡¯ç¤ºåœ¨é ‚éƒ¨å¡ç‰‡")
print("<h1>NT$ {total.toLocaleString()}</h1>  // é ä¼°ç¸½è²»ç”¨")
print("<p>NT$ {perPerson.toLocaleString()}</p>  // äººå‡ç´„")
print("```")
print()

print("=" * 80)
print("ğŸ” å•é¡Œè¨ºæ–·ï¼šé‚è¼¯æ˜¯å¦æ­£ç¢ºï¼Ÿ")
print("=" * 80)
print()

print("âŒ **ç™¼ç¾å•é¡Œ 1ï¼šåˆå§‹ç‹€æ…‹ä¸‹ç¸½åƒ¹ç‚º 0**")
print()
print("åŸå› ï¼š")
print("  - calculateTotal() åªè¨ˆç®— itemRatings.get(item.name) === 'like' çš„èœå“")
print("  - åˆå§‹ç‹€æ…‹ä¸‹ï¼ŒitemRatings æ˜¯ç©ºçš„ Map")
print("  - å› æ­¤é¡¯ç¤ºã€ŒNT$ 0ã€è€Œéã€Œç³»çµ±æ¨è–¦çš„ç¸½é‡‘é¡ã€")
print()

print("å½±éŸ¿ï¼š")
print("  âœ— ä½¿ç”¨è€…çœ‹ä¸åˆ°ã€Œç³»çµ±å»ºè­°å¦‚æœå…¨é¸è¦èŠ±å¤šå°‘éŒ¢ã€")
print("  âœ— ç„¡æ³•åœ¨é¸æ“‡å‰é è¦½é ç®—æ˜¯å¦åˆç†")
print()

print("âŒ **ç™¼ç¾å•é¡Œ 2ï¼šæœªå€åˆ†ã€Œç³»çµ±æ¨è–¦ã€vsã€Œç•¶å‰å·²é¸ã€**")
print()
print("ç¾æ³ï¼š")
print("  - åªæœ‰ä¸€å€‹ total è®Šæ•¸")
print("  - ç„¡æ³•åŒæ™‚é¡¯ç¤ºå…©å€‹æ•¸å­—è®“ä½¿ç”¨è€…æ¯”è¼ƒ")
print()

print("å½±éŸ¿ï¼š")
print("  âœ— ä½¿ç”¨è€…ä¸çŸ¥é“ã€Œç³»çµ±åŸæœ¬å»ºè­°çš„ç¸½åƒ¹ã€")
print("  âœ— ç•¶æ›èœå¾Œï¼Œç„¡æ³•åˆ¤æ–·æ˜¯å¦è¶…å‡ºåŸæœ¬é æœŸ")
print()

print("=" * 80)
print("âœ… æ­£ç¢ºçš„é‚è¼¯è¨­è¨ˆ")
print("=" * 80)
print()

print("### æ‡‰è©²æœ‰å…©å€‹åƒ¹æ ¼è¨ˆç®—ï¼š")
print()
print("```typescript")
print("// 1. ç³»çµ±æ¨è–¦ç¸½é‡‘é¡ï¼ˆå›ºå®šï¼Œä¸è®Šï¼‰")
print("const systemRecommendedTotal = currentItems.reduce((sum, item) => ")
print("    sum + (item.price || 0), 0);")
print()
print("// 2. ç•¶å‰å·²é¸ç¸½é‡‘é¡ï¼ˆå‹•æ…‹è®ŠåŒ–ï¼‰")
print("const currentSelectedTotal = currentItems.reduce((sum, item) => {")
print("    if (selectedItems.has(item.name)) {  // ä½¿ç”¨ 'selected' è€Œé 'like'")
print("        return sum + (item.price || 0);")
print("    }")
print("    return sum;")
print("}, 0);")
print("```")
print()

print("### é¡¯ç¤ºæ–¹å¼å»ºè­°ï¼š")
print()
print("#### æ–¹æ¡ˆ Aï¼šä¸¦æ’é¡¯ç¤º")
print("```")
print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
print("â”‚ ç³»çµ±æ¨è–¦       â”‚    å·²é¸ä¸­         â”‚")
print("â”‚ NT$ 1,200     â”‚    NT$ 800       â”‚")
print("â”‚ äººå‡ $400     â”‚    äººå‡ $267     â”‚")
print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
print("```")
print()

print("#### æ–¹æ¡ˆ Bï¼šå‹•æ…‹åˆ‡æ›ï¼ˆæ¨è–¦ï¼‰")
print("```")
print("åˆå§‹ç‹€æ…‹ï¼ˆæœªé¸ä»»ä½•èœï¼‰ï¼š")
print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
print("â”‚ ç³»çµ±å»ºè­°ç¸½åƒ¹                        â”‚")
print("â”‚ NT$ 1,200                          â”‚")
print("â”‚ äººå‡ $400 / äººï¼ˆå…± 8 é“èœï¼‰        â”‚")
print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
print()
print("é¸æ“‡å¾Œï¼š")
print("â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”")
print("â”‚ å·²é¸ 3 é“ Â· NT$ 800                â”‚")
print("â”‚ äººå‡ $267 / äºº                     â”‚")
print("â”‚ ğŸ’¡ ç³»çµ±å»ºè­°: $1,200 (8é“)          â”‚")
print("â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜")
print("```")
print()

print("=" * 80)
print("ğŸ¯ æ”¹è‰¯ç‰ˆæ–¹æ¡ˆçš„å®Œæ•´é‚è¼¯")
print("=" * 80)
print()

print("### State è¨­è¨ˆ")
print("```typescript")
print("// æ”¹åï¼šå¾ itemRatings æ”¹ç‚º selectedItems")
print("const [selectedItems, setSelectedItems] = useState<Set<string>>(new Set());")
print()
print("// æ–°å¢ï¼šç³»çµ±æ¨è–¦ç¸½åƒ¹ï¼ˆå›ºå®šå€¼ï¼Œfetch å¾Œè¨­å®šï¼‰")
print("const [systemTotal, setSystemTotal] = useState(0);")
print("```")
print()

print("### è¨ˆç®—å‡½æ•¸")
print("```typescript")
print("// ç³»çµ±æ¨è–¦ç¸½åƒ¹ï¼ˆåˆå§‹åŒ–æ™‚è¨ˆç®—ä¸€æ¬¡ï¼‰")
print("useEffect(() => {")
print("    if (currentItems.length > 0) {")
print("        const total = currentItems.reduce((sum, item) => ")
print("            sum + (item.price || 0), 0);")
print("        setSystemTotal(total);")
print("    }")
print("}, [currentItems]);")
print()
print("// ç•¶å‰å·²é¸ç¸½åƒ¹ï¼ˆå‹•æ…‹è®ŠåŒ–ï¼‰")
print("const selectedTotal = Array.from(selectedItems).reduce((sum, itemName) => {")
print("    const item = currentItems.find(i => i.name === itemName);")
print("    return sum + (item?.price || 0);")
print("}, 0);")
print("```")
print()

print("### UI é¡¯ç¤ºé‚è¼¯")
print("```typescript")
print("const selectedCount = selectedItems.size;")
print("const totalCount = currentItems.length;")
print("const hasSelection = selectedCount > 0;")
print()
print("return (")
print("    <div className='price-card'>")
print("        {hasSelection ? (")
print("            // å·²é¸ç‹€æ…‹")
print("            <>")
print("                <h3>å·²é¸ {selectedCount} é“ Â· NT$ {selectedTotal}</h3>")
print("                <p>äººå‡ ${Math.round(selectedTotal / people)}</p>")
print("                <small>ğŸ’¡ ç³»çµ±å»ºè­°: ${systemTotal} ({totalCount}é“)</small>")
print("            </>")
print("        ) : (")
print("            // åˆå§‹ç‹€æ…‹")
print("            <>")
print("                <h3>ç³»çµ±å»ºè­°ç¸½åƒ¹ NT$ {systemTotal}</h3>")
print("                <p>äººå‡ ${Math.round(systemTotal / people)} ({totalCount}é“)</p>")
print("            </>")
print("        )}")
print("    </div>")
print(");")
print("```")
print()

print("=" * 80)
print("ğŸ“Š é‚è¼¯é©—è­‰æ¡ˆä¾‹")
print("=" * 80)
print()

# æ¨¡æ“¬æ¡ˆä¾‹
print("### æ¡ˆä¾‹ï¼š2äººç”¨é¤ï¼Œç³»çµ±æ¨è–¦ 5 é“èœ")
print()

items = [
    {"name": "å°ç± åŒ…", "price": 180},
    {"name": "ç´…ç‡’è‚‰", "price": 280},
    {"name": "ç‚’é’èœ", "price": 120},
    {"name": "è›‹ç‚’é£¯", "price": 150},
    {"name": "é…¸è¾£æ¹¯", "price": 100},
]

system_total = sum(item["price"] for item in items)
people = 2

print(f"ç³»çµ±æ¨è–¦èœå“ï¼š")
for item in items:
    print(f"  - {item['name']}: NT$ {item['price']}")
print()
print(f"ç³»çµ±æ¨è–¦ç¸½åƒ¹: NT$ {system_total}")
print(f"ç³»çµ±æ¨è–¦äººå‡: NT$ {system_total // people} / äºº")
print()

print("--- ä½¿ç”¨è€…æ“ä½œæµç¨‹ ---")
print()

# æ­¥é©Ÿ 1
print("æ­¥é©Ÿ 1: åˆå§‹é€²å…¥é é¢")
print("  é¡¯ç¤º: ã€Œç³»çµ±å»ºè­°ç¸½åƒ¹ NT$ 830 (äººå‡ $415, å…± 5 é“èœ)ã€")
print("  selectedItems = {}")
print()

# æ­¥é©Ÿ 2
selected = {"å°ç± åŒ…", "ç´…ç‡’è‚‰"}
selected_total = sum(item["price"] for item in items if item["name"] in selected)
print("æ­¥é©Ÿ 2: ä½¿ç”¨è€…é»é¸ã€Œæˆ‘è¦é»é€™é“ã€â†’ å°ç± åŒ…ã€ç´…ç‡’è‚‰")
print(f"  é¡¯ç¤º: ã€Œå·²é¸ 2 é“ Â· NT$ {selected_total}ã€")
print(f"       ã€Œäººå‡ ${selected_total // people} / äººã€")
print(f"       ã€ŒğŸ’¡ ç³»çµ±å»ºè­°: ${system_total} (5é“)ã€")
print(f"  selectedItems = {selected}")
print()

# æ­¥é©Ÿ 3
print("æ­¥é©Ÿ 3: ä½¿ç”¨è€…é»é¸ã€Œæ›ä¸€é“ã€â†’ å°‡ç´…ç‡’è‚‰æ›æˆç³–é†‹é­š")
selected = {"å°ç± åŒ…", "ç³–é†‹é­š"}
items_updated = items[:]
items_updated[1] = {"name": "ç³–é†‹é­š", "price": 320}
selected_total = sum(item["price"] for item in items_updated if item["name"] in selected)
print(f"  é¡¯ç¤º: ã€Œå·²é¸ 2 é“ Â· NT$ {selected_total}ã€")
print(f"       ã€Œäººå‡ ${selected_total // people} / äººã€")
print(f"       ã€ŒğŸ’¡ ç³»çµ±å»ºè­°: ${system_total} (5é“)ã€")
print(f"  selectedItems = {selected}")
print("  è¨»: ç³»çµ±æ¨è–¦ç¸½åƒ¹å¯èƒ½æ”¹è®Šï¼ˆå› ç‚ºèœå“è®Šäº†ï¼‰ï¼Œéœ€é‡æ–°è¨ˆç®—")
print()

print("=" * 80)
print("âœ… çµè«–")
print("=" * 80)
print()

print("æ‚¨çš„é‚è¼¯**å®Œå…¨æ­£ç¢º**ï¼æ‡‰è©²è¦ï¼š")
print()
print("1. âœ… åˆå§‹é¡¯ç¤ºã€Œç³»çµ±æ¨è–¦ç¸½é‡‘é¡ã€")
print("   - è®“ä½¿ç”¨è€…çŸ¥é“ã€Œå¦‚æœå…¨é¸ã€è¦èŠ±å¤šå°‘éŒ¢")
print("   - è©•ä¼°æ˜¯å¦ç¬¦åˆé ç®—")
print()
print("2. âœ… å‹•æ…‹é¡¯ç¤ºã€Œç•¶å‰å·²é¸ç¸½é‡‘é¡ã€")
print("   - ä½¿ç”¨è€…æ¯æ¬¡é»é¸/å–æ¶ˆ/æ›èœæ™‚å³æ™‚æ›´æ–°")
print("   - ä¿ç•™ã€Œç³»çµ±å»ºè­°ã€ä½œç‚ºåƒè€ƒåŸºæº–")
print()
print("3. âœ… å…©è€…éƒ½æ‡‰è©²é¡¯ç¤º")
print("   - ç³»çµ±å»ºè­° = å®Œæ•´é«”é©—çš„åƒè€ƒå€¼")
print("   - ç•¶å‰å·²é¸ = å¯¦éš›è¦æ”¯ä»˜çš„é‡‘é¡")
print()

print("ğŸ”§ éœ€è¦ä¿®æ­£ç¾æœ‰å¯¦ä½œçš„åœ°æ–¹ï¼š")
print()
print("  âŒ ç›®å‰åªæœ‰ã€Œç•¶å‰å·²é¸ã€ï¼ˆä¸”åˆå§‹ç‚º 0ï¼‰")
print("  âœ… æ‡‰è©²åŠ å…¥ã€Œç³»çµ±æ¨è–¦ã€ä¸¦å„ªå…ˆé¡¯ç¤º")
print()

print("=" * 80)
print("ğŸ“ å¯¦ä½œå»ºè­°å„ªå…ˆç´š")
print("=" * 80)
print()
print("å„ªå…ˆç´š 1 (å¿…åš): ä¿®æ­£åˆå§‹é¡¯ç¤º")
print("  - åŠ å…¥ systemTotal è¨ˆç®—")
print("  - åˆå§‹é¡¯ç¤ºç³»çµ±æ¨è–¦ç¸½åƒ¹")
print()
print("å„ªå…ˆç´š 2 (å¿…åš): å‹•æ…‹åˆ‡æ›é¡¯ç¤º")
print("  - é¸æ“‡å¾Œåˆ‡æ›ç‚ºã€Œå·²é¸ç¸½åƒ¹ã€")
print("  - ä¿ç•™ç³»çµ±å»ºè­°ä½œç‚ºå°å­—æç¤º")
print()
print("å„ªå…ˆç´š 3 (å»ºè­°): å¢å¼·è¦–è¦ºå›é¥‹")
print("  - é€²åº¦æ¢é¡¯ç¤ºã€Œå·²é¸/ç¸½æ•¸ã€")
print("  - åƒ¹æ ¼è¶…é ç®—æ™‚è­¦å‘Š")
print()

print("=" * 80)
